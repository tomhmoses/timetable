{% extends "structure.html" %}
{% block head_scripts %}
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-131203296-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-131203296-1');
    </script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-THMH39H');
    </script>
    <!-- End Google Tag Manager -->
    <!-- Share this verification -->
    <script type='text/javascript' src='//platform-api.sharethis.com/js/sharethis.js#property=5c4605d6058f100011a5ac6f&product=sticky-share-buttons' async='async'></script>
    <!-- End share this verification -->
    <script src='https://www.google.com/recaptcha/api.js'></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/css/bootstrap-select.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.2/js/bootstrap-select.min.js"></script>

{% endblock %}
{% block title %}UoB Timetable Converter{% endblock %}
{% block description %}Easily add your student timetable to your calendar on your phone (or other device).{% endblock %}
{% block url %}https://ttc.tmoses.co.uk/{% endblock %}
{% block extra_styles %}
    <style>
        .pinkbutton {background-color: #FC92A4; border: none;} /* Pink */
    </style>
{% endblock %}
{% block body_scripts %}
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-THMH39H"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- facebook share button javascript -->
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = 'https://connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v3.2';
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
    </script>
    <!-- End facebook share button javascript -->
    <!-- twiter share button javascript -->
    <script>window.twttr = (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0],
          t = window.twttr || {};
        if (d.getElementById(id)) return t;
        js = d.createElement(s);
        js.id = id;
        js.src = "https://platform.twitter.com/widgets.js";
        fjs.parentNode.insertBefore(js, fjs);

        t._e = [];
        t.ready = function(f) {
          t._e.push(f);
        };

        return t;
        }(document, "script", "twitter-wjs"));
    </script>
    <!-- End twiter share button javascript -->
    {% endblock %}
    {% block navbar_items %}
    <li class="nav-item">
        <a class="nav-link" href="https://home.tmoses.co.uk/">Home</a>
    </li>
    <li class="nav-item active">
        <a class="nav-link" href="#">Timetable <span class="sr-only">(current)</span></a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="https://home.tmoses.co.uk/repairs">Repairs</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="https://ttc.tmoses.co.uk/donate">Donate</a>
    </li>
{% endblock %}
{% block page_content %}
    {% if done %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>Done! </strong> You will be emailed in roughly {{ mins }} minutes.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
    {% endif %}
    <h3>
    </h3>
    <h1 id="start">
        Get started
    </h1>
    <p>
        So far this site has been used to convert <strong>{{stats["users"]}}</strong> UoB timetables!
    </p>
    <p>
        Fill in the boxes below and click submit. It makes things much easier if you use the email linked with your google account. Then add your google account to your phone with calendar toggled on.
    </p>
    <p>
        Please be aware this just copies the current timetable, you should probably still check from time to time if it has changed.
    </p>
    <h2 id="donate">
        1. Donate to charity
    </h2>
    <p>
        Think of it like a bake sale, but you get to use the service rather than getting a cupcake.
    </p>
    <p>
        I'm currently trying to raise money for breast cancer now, I would really appriciate it if you donated around £2-£5 to this great cause.
    </p>
    <p>
        Breast cancer touches almost everybody, whether it's through a direct relative, a friend, or a friend's family. This great cause is actively working towards the goal of stopping all deaths caused by breast cancer by 2050, your donations help keep the constant research funded and on track.
    </p>
    <p>
        <a href="https://l2p19.everydayhero.com/uk/tom" class="btn btn-secondary btn-lg pinkbutton" target="_blank">Breast Cancer Now</a>
    </p>
    <p style="font-size: 11px !important";>
        You do not <em>have</em> to donate to use this service.
    </p>
    <h2>
        2. Start
    </h2>
    <form action="." method="POST">
        <div class="form-group">
            <label for="email">Email:</label>
            <input class="form-control" id="email" name="email" type="email" placeholder="email linked with your google account">
        </div>
        <div class="form-group">
            <label for="username">Uni Username:</label>
            <input class="form-control" id="username" name="username" type="text" autocorrect="off" autocapitalize="none" placeholder="Enter your username">
        </div>
        <div class="form-group">
            <label for="password">Uni Password:</label>
            <input class="form-control" id="password" name="password" type="password" placeholder="Enter your password">
        </div>
        <div class="form-group">
            <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#moreOptions" aria-expanded="false" aria-controls="moreOptions">
            More Options
            </button>
        </div>
        <div class="collapse" id="moreOptions">
            <div class="form-group form-check custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="shortenTitle" name="shortenTitle" checked>
                <label class="custom-control-label" for="shortenTitle">Shorten Event Titles</label>
            </div>
            <div class="form-group">
                <label for="customTitle">Custom Calendar Title:</label>
                <input class="form-control" id="customTitle" name="customTitle" type="text" placeholder="UoB Timetable: ABC123">
            </div>
            <div class="form-group">
                <label for="colorPicker">Custom Calendar Color (not working):</label>
                <select class="selectpicker" data-live-search="true" data-width="fit" tabindex="-98">
                    <option style="background-color: #7a86cb">1</option>
                    <option style="background-color: #33b679">2</option>
                    <option style="background-color: #8e24aa">3</option>
                    <option style="background-color: #e67c73">4</option>
                    <option style="background-color: #f6bf25">5</option>
                    <option style="background-color: #f4521d">6</option>
                    <option style="background-color: #039be5">7</option>
                    <option style="background-color: #616161">8</option>
                    <option style="background-color: #3f51b5">9</option>
                    <option style="background-color: #0a8043">10</option>
                    <option style="background-color: #d50001">11</option>
                    <option data-content="<span class='badge badge-success'>Relish</span>">2</option>
                    <option data-content="<span class='badge badge-success'>Relish</span>">3</option>
                    <option data-content="<span class='badge badge-success'>Relish</span>">4</option>
                    <option><span class="badge badge-primary">Primary</span></option>
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-success btn-lg btn-block">
        Submit
        </button>
    </form>
    <p>
        It might take a few seconds to load but please just wait for the confirmation message.
    </p>
    <h2 id = "share">
        3. Share
    </h2>
    <p>
        Send this page to a group chat:
    </p>
    <p>
    <div
        class="sharethis-inline-share-buttons"
        data-url="https://ttc.tmoses.co.uk/"
        data-title="Check out UoB Timetable Converter!"
        data-description="Easily add your student timetable to your calendar on your phone (or other device)."
        data-image="https://i.imgur.com/FuSqj7t.jpg">
    </div>
    </p>
    <p>
        And give the website a like:
    </p>
    <p>
    <div class="embed-responsive embed-responsive">
        <div class="fb-like" data-href="https://tomhmoses.pythonanywhere.com/timetable/" data-layout="standard" data-action="like" data-size="large" data-show-faces="true" data-share="false"></div>
    </div>
    </p>
    <p>
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Add%20your%20%40mybham%20timetable%20to%20your%20phone%20calendar%20now%3A" data-size="large">
        Tweet
        </a>
    </p>
    <h2>
        4. Add it to your phone
    </h2>
    <p>
        If you have an iPhone then you need to make sure your google account is added. If it isn't you can follow <a href="https://support.google.com/calendar/answer/99358" class="badge badge-primary">this guide</a>.
    </p>
    <h1 id="about">
        About
    </h1>
    <p>
        This service allows you to easily add your University of Birmingham student timetable to your calendar; making it easier than ever to view. After submitting your request you will shortly be emailed a link to add the timetable calendar to your calendar app. All modern calendar apps support multiple calendars at once.
    </p>
    <p>
        This project is made by Tom Moses (a first year Comp Sci student at UoB) and is <a href="https://tomhmoses.github.io/OnlineBhamTimetableConverter/" class="badge badge-secondary">open source</a>. If you need to contact me, <a href="mailto:tom@tmoses.co.uk?Subject=UoB%20Timetable%20Converter%20Comment" target="_top" class="badge badge-secondary">email me</a> or <a href="https://m.me/tomhmoses/" target="_blank" class="badge badge-secondary">message me</a>.
    </p>
    <p>
        If you are worries about entering your details into this site, please rest assured that your password is never stored. Your email is temporarily stored while the processing is happening. Your username is stored so that I am able to track statistics of how many users I have.
    </p>
    <p>
        If you do not want <em>any</em> information stored, there is <a href="https://repl.it/@TomMoses/timetable" class="badge badge-secondary">this</a> very old version I made (which is much more complicated to use).
    </p>
    <h2 id="stats">
        Stats
    </h2>
    <p>
        So far, the site has had <strong>{{stats["visits"]}}</strong> visits and <strong>{{stats["users"]}}</strong> uses. There are currently <strong>{{stats["queue"]}}</strong> users in the queue. So far, the amount of people from the university to have used or seen this service:
    </p>
    <p>
    <div class="progress" style="height: 30px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: {{ (stats["users"]-stats["queue"])/280 }}%" aria-valuenow="{{(stats["users"]-stats["queue"])}}" aria-valuemin="0" aria-valuemax="28000">
    </div>
    <div class="progress-bar progress-bar-striped bg-warning" role="progressbar" style="width: {{ stats["queue"]/280 }}%" aria-valuenow="{{stats["queue"]}}" aria-valuemin="0" aria-valuemax="28000"></div>
    <div class="progress-bar bg-secondary" role="progressbar" style="width: {{ (stats["visits"]-stats["users"]-stats["queue"])/280 }}%" aria-valuenow="{{stats["visits"]-stats["users"]-stats["queue"]}}" aria-valuemin="0" aria-valuemax="28000"></div>
    </div>
    </p>
    <p>
        This project is made of <strong>{{stats["python"]}}</strong> lines of python code and <strong>{{stats["HTML"]}}</strong> lines of HTML.
    </p>
    <h2>
        End Result
    </h2>
    <p>
    <div id="carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://i.ibb.co/bWh1g27/screenshots.jpg" alt="iPhone X screenshots">
            </div>
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://i.ibb.co/mF2ywSG/watches.jpg" alt="Apple Watch screenshots">
            </div>
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://i.ibb.co/XzrPzwC/xps-screenshot.jpg" alt="Dell XPS screenshot">
            </div>
        </div>
    </div>
    </p>
    <br/>
    <p>
        test 21/01/19 15:15
    </p>
{% endblock %}